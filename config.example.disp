;; -*- mode: lisp -*-

;; ####################
;; Layout definitions
;; ####################

;; Laptop only
(define-layout laptop-only
  ((output (name= "eDP-1")
           :mode (1920 1200 120)
           :position (0 0)
           :primary t)))

;; Laptop + external top
(define-layout external-top
  ((output (name= "eDP-1")
           :mode (1920 1200 120)
           :position (0 1080)
           :primary t)
   (output (not-name= "eDP-1")
           :mode (1920 1080)
           :position (0 0))))

;; Laptop + external left
(define-layout external-left
  ((output (name= "eDP-1")
           :mode (1920 1200 120)
           :position (1600 0)
           :primary t)
   (output (not-name= "eDP-1")
           :mode (1600 900)
           :position (0 0))))

;; Presentation layout
(define-layout presentation
  ((output (name= "eDP-1")
           :mode (1920 1200 120)
           :position (0 0)
           :primary t)
   (output (not-name= "eDP-1")
           :mode (1920 1080)
           :position (0 0))))

;; ##################
;; Rule definitions
;; ##################

;; When connected WiFi-Example-1, use laptop + external top monitor if possible
;; Max priority on this rule
(define-rule top-layout-1
  :predicate (wifi= "WiFi-Example-1")
  :priority 1
  :layout external-top)

;; When connected to WiFi-Example-2, use laptop + external left monitor if possible
(define-rule left-layout-1
  :predicate (wifi= "WiFi-Example-2")
  :layout external-left)

;; Fallback to laptop only
(define-rule default-layout
  ;; no predicate for default rule
  :layout laptop-only)

;; Add trigger for when layout is about to be set
(define-trigger before-layout
 ((run-shell :action "set-my-wallpaper")))

;; Add trigger for when layout is set
(define-trigger after-layout
 ((run-shell :action "set-my-wallpaper")))
